[2025-09-04 13:52:03] [INFO] [transactions] PERFECTION TEST: Transaction processing test
[2025-09-04 13:56:33] [INFO] [transactions] Creating transaction for user abassi.loay@gmail.com
[2025-09-04 13:56:33] [INFO] [transactions] Client profile found: loay abassi
[2025-09-04 13:56:33] [INFO] [transactions] Location validation passed: (35.6286464, 10.8986368)
[2025-09-04 13:56:33] [INFO] [transactions] Updated last known location for user abassi.loay@gmail.com: (35.6286464, 10.8986368)
[2025-09-04 13:56:33] [INFO] [transactions] Location tracking: User=abassi.loay@gmail.com, Home=(35.523487, 10.172494), Current=(35.6286464, 10.8986368), Last Known=(35.6286464, 10.8986368)
[2025-09-04 13:56:33] [INFO] [transactions] Transaction created: ID 315, Amount: 2500.00, Type: transfer
[2025-09-04 13:56:33] [INFO] [transactions] Risk assessment: Score=50, Triggers=['Enhanced distance rule: 66.70km from home > 50.0km threshold'], Requires OTP=False, Decision=Monitor
[2025-09-04 13:56:39] [INFO] [transactions] ML score: 0.5447760545624403, Contribution: 21, Final risk score: 71
[2025-09-04 13:56:39] [INFO] [transactions] Transaction details: ID=315, Client=loay abassi, Type=transfer, Amount=2500.00 DZD, Risk Score=71, Decision=Monitor, Triggers=['Enhanced distance rule: 66.70km from home > 50.0km threshold']
[2025-09-04 13:56:39] [INFO] [transactions] Transaction | ID: 315 | Amount: 2500.00 DZD | Type: transfer | Status: CREATED | Data: {"transaction_id": 315, "amount": "2500.00", "transaction_type": "transfer", "user_id": 61, "status": "CREATED", "risk_level": "Score_71"}
[2025-09-04 13:56:39] [INFO] [transactions] OTP decision for transaction 315: Required=True, Reasons=['Business rules triggered: 1', 'High risk score: 71']
[2025-09-04 13:56:39] [INFO] [transactions] Creating transaction OTP for transaction 315, user abassi.loay@gmail.com
[2025-09-04 13:56:39] [INFO] [transactions] Created transaction OTP 212810 for transaction 315, expires at 2025-09-04 13:06:39.968144+00:00
[2025-09-04 13:56:51] [INFO] [transactions] Transaction OTP created and sent successfully for transaction 315
[2025-09-04 13:56:51] [INFO] [transactions] Transaction requires OTP verification: ID 315, Risk score: 71, Triggers: 1, ML score: 0.545
[2025-09-04 13:58:04] [INFO] [transactions] Verifying transaction OTP for transaction 315, user abassi.loay@gmail.com
[2025-09-04 13:58:04] [INFO] [transactions] Transaction OTP verified successfully for transaction 315
[2025-09-04 13:58:04] [INFO] [transactions] Updating balances for transaction 315
[2025-09-04 13:58:04] [INFO] [transactions] Current balance: 6107362.04, Amount: 2500.00
[2025-09-04 13:58:04] [INFO] [transactions] Transfer (sender): New balance = 6104862.04
[2025-09-04 13:58:04] [WARNING] [transactions] Recipient account 555555555 not found for transfer
[2025-09-04 13:58:04] [INFO] [transactions] Updating statistics for client loay abassi
[2025-09-04 13:58:04] [INFO] [transactions] Statistics updated for loay abassi: avg_amount=58068.2483333333, std_amount=202709.299621811, transaction_count=24
[2025-09-04 13:58:04] [INFO] [transactions] Balance update completed for client loay abassi. New balance: 6104862.04 DZD
[2025-09-04 13:58:04] [INFO] [transactions] Transaction 315 completed after OTP verification
[2025-09-04 13:59:13] [INFO] [transactions] Creating transaction for user abassi.loay@gmail.com
[2025-09-04 13:59:13] [INFO] [transactions] Client profile found: loay abassi
[2025-09-04 13:59:13] [INFO] [transactions] Location validation passed: (35.6286464, 10.8986368)
[2025-09-04 13:59:13] [INFO] [transactions] Updated last known location for user abassi.loay@gmail.com: (35.6286464, 10.8986368)
[2025-09-04 13:59:13] [INFO] [transactions] Location tracking: User=abassi.loay@gmail.com, Home=(35.523487, 10.172494), Current=(35.6286464, 10.8986368), Last Known=(35.6286464, 10.8986368)
[2025-09-04 13:59:13] [INFO] [transactions] Transaction created: ID 316, Amount: 500.00, Type: transfer
[2025-09-04 13:59:13] [INFO] [transactions] Risk assessment: Score=50, Triggers=['Enhanced distance rule: 66.70km from home > 50.0km threshold'], Requires OTP=False, Decision=Monitor
[2025-09-04 13:59:13] [INFO] [transactions] ML score: 0.4950104268254103, Contribution: 19, Final risk score: 69
[2025-09-04 13:59:13] [INFO] [transactions] Transaction details: ID=316, Client=loay abassi, Type=transfer, Amount=500.00 DZD, Risk Score=69, Decision=Monitor, Triggers=['Enhanced distance rule: 66.70km from home > 50.0km threshold']
[2025-09-04 13:59:13] [INFO] [transactions] Transaction | ID: 316 | Amount: 500.00 DZD | Type: transfer | Status: CREATED | Data: {"transaction_id": 316, "amount": "500.00", "transaction_type": "transfer", "user_id": 61, "status": "CREATED", "risk_level": "Score_69"}
[2025-09-04 13:59:13] [INFO] [transactions] OTP decision for transaction 316: Required=True, Reasons=['Business rules triggered: 1']
[2025-09-04 13:59:13] [INFO] [transactions] Creating transaction OTP for transaction 316, user abassi.loay@gmail.com
[2025-09-04 13:59:13] [INFO] [transactions] Created transaction OTP 832848 for transaction 316, expires at 2025-09-04 13:09:13.766089+00:00
[2025-09-04 13:59:20] [INFO] [transactions] Transaction OTP created and sent successfully for transaction 316
[2025-09-04 13:59:20] [INFO] [transactions] Transaction requires OTP verification: ID 316, Risk score: 69, Triggers: 1, ML score: 0.495
[2025-09-04 14:01:00] [INFO] [transactions] Creating transaction for user abassi.loay@gmail.com
[2025-09-04 14:01:00] [INFO] [transactions] Client profile found: loay abassi
[2025-09-04 14:01:00] [INFO] [transactions] Location validation passed: (35.6286464, 10.8986368)
[2025-09-04 14:01:00] [INFO] [transactions] Updated last known location for user abassi.loay@gmail.com: (35.6286464, 10.8986368)
[2025-09-04 14:01:00] [INFO] [transactions] Location tracking: User=abassi.loay@gmail.com, Home=(35.523487, 10.172494), Current=(35.6286464, 10.8986368), Last Known=(35.6286464, 10.8986368)
[2025-09-04 14:01:00] [INFO] [transactions] Transaction created: ID 317, Amount: 500.00, Type: transfer
[2025-09-04 14:01:00] [INFO] [transactions] Risk assessment: Score=50, Triggers=['Enhanced distance rule: 66.70km from home > 50.0km threshold'], Requires OTP=False, Decision=Monitor
[2025-09-04 14:01:00] [INFO] [transactions] ML score: 0.4942724517815491, Contribution: 19, Final risk score: 69
[2025-09-04 14:01:00] [INFO] [transactions] Transaction details: ID=317, Client=loay abassi, Type=transfer, Amount=500.00 DZD, Risk Score=69, Decision=Monitor, Triggers=['Enhanced distance rule: 66.70km from home > 50.0km threshold']
[2025-09-04 14:01:00] [INFO] [transactions] Transaction | ID: 317 | Amount: 500.00 DZD | Type: transfer | Status: CREATED | Data: {"transaction_id": 317, "amount": "500.00", "transaction_type": "transfer", "user_id": 61, "status": "CREATED", "risk_level": "Score_69"}
[2025-09-04 14:01:00] [INFO] [transactions] OTP decision for transaction 317: Required=True, Reasons=['Business rules triggered: 1']
[2025-09-04 14:01:00] [INFO] [transactions] Creating transaction OTP for transaction 317, user abassi.loay@gmail.com
[2025-09-04 14:01:00] [INFO] [transactions] Created transaction OTP 657655 for transaction 317, expires at 2025-09-04 13:11:00.522006+00:00
[2025-09-04 14:01:05] [INFO] [transactions] Transaction OTP created and sent successfully for transaction 317
[2025-09-04 14:01:05] [INFO] [transactions] Transaction requires OTP verification: ID 317, Risk score: 69, Triggers: 1, ML score: 0.494
[2025-09-04 14:01:24] [INFO] [transactions] Verifying transaction OTP for transaction 317, user abassi.loay@gmail.com
[2025-09-04 14:01:24] [INFO] [transactions] Transaction OTP verified successfully for transaction 317
[2025-09-04 14:01:24] [INFO] [transactions] Updating balances for transaction 317
[2025-09-04 14:01:24] [INFO] [transactions] Current balance: 6104862.04, Amount: 500.00
[2025-09-04 14:01:24] [INFO] [transactions] Transfer (sender): New balance = 6104362.04
[2025-09-04 14:01:24] [WARNING] [transactions] Recipient account 77777777 not found for transfer
[2025-09-04 14:01:24] [INFO] [transactions] Updating statistics for client loay abassi
[2025-09-04 14:01:24] [INFO] [transactions] Statistics updated for loay abassi: avg_amount=55845.5184000000, std_amount=198912.016800382, transaction_count=25
[2025-09-04 14:01:24] [INFO] [transactions] Balance update completed for client loay abassi. New balance: 6104362.04 DZD
[2025-09-04 14:01:24] [INFO] [transactions] Transaction 317 completed after OTP verification
[2025-09-04 14:37:42] [INFO] [transactions] Creating transaction for user abassi.loay@gmail.com
[2025-09-04 14:37:42] [INFO] [transactions] Client profile found: loay abassi
[2025-09-04 14:37:42] [INFO] [transactions] Location validation passed: (35.6286464, 10.8986368)
[2025-09-04 14:37:42] [INFO] [transactions] Updated last known location for user abassi.loay@gmail.com: (35.6286464, 10.8986368)
[2025-09-04 14:37:42] [INFO] [transactions] Location tracking: User=abassi.loay@gmail.com, Home=(35.628646, 10.898637), Current=(35.6286464, 10.8986368), Last Known=(35.6286464, 10.8986368)
[2025-09-04 14:37:42] [INFO] [transactions] Transaction created: ID 318, Amount: 9500.00, Type: transfer
[2025-09-04 14:37:42] [INFO] [transactions] Risk assessment: Score=0, Triggers=[], Requires OTP=False, Decision=Approve
[2025-09-04 14:37:44] [INFO] [transactions] ML score: 0.5, Contribution: 20, Final risk score: 20
[2025-09-04 14:37:44] [INFO] [transactions] Transaction details: ID=318, Client=loay abassi, Type=transfer, Amount=9500.00 DZD, Risk Score=20, Decision=Approve, Triggers=[]
[2025-09-04 14:37:44] [INFO] [transactions] Transaction | ID: 318 | Amount: 9500.00 DZD | Type: transfer | Status: CREATED | Data: {"transaction_id": 318, "amount": "9500.00", "transaction_type": "transfer", "user_id": 71, "status": "CREATED", "risk_level": "Score_20"}
[2025-09-04 14:37:44] [INFO] [transactions] OTP decision for transaction 318: Required=False, Reasons=[]
[2025-09-04 14:37:44] [INFO] [transactions] Updating balances for transaction 318
[2025-09-04 14:37:44] [INFO] [transactions] Current balance: 700000000.00, Amount: 9500.00
[2025-09-04 14:37:44] [INFO] [transactions] Transfer (sender): New balance = 699990500.00
[2025-09-04 14:37:44] [WARNING] [transactions] Recipient account 5555555 not found for transfer
[2025-09-04 14:37:44] [INFO] [transactions] Updating statistics for client loay abassi
[2025-09-04 14:37:44] [INFO] [transactions] No completed transactions found for client loay abassi
[2025-09-04 14:37:44] [INFO] [transactions] Balance update completed for client loay abassi. New balance: 699990500.00 DZD
[2025-09-04 14:37:44] [INFO] [transactions] Low risk transaction completed: ID 318, Risk score: 20
[2025-09-04 14:39:55] [INFO] [transactions] Creating transaction for user abassi.loay@gmail.com
[2025-09-04 14:39:55] [INFO] [transactions] Client profile found: loay abassi
[2025-09-04 14:39:55] [INFO] [transactions] Location validation passed: (35.6286464, 10.8986368)
[2025-09-04 14:39:55] [INFO] [transactions] Updated last known location for user abassi.loay@gmail.com: (35.6286464, 10.8986368)
[2025-09-04 14:39:55] [INFO] [transactions] Location tracking: User=abassi.loay@gmail.com, Home=(34.931003, 9.357500), Current=(35.6286464, 10.8986368), Last Known=(35.6286464, 10.8986368)
[2025-09-04 14:39:55] [INFO] [transactions] Transaction created: ID 319, Amount: 500.00, Type: transfer
[2025-09-04 14:39:55] [INFO] [transactions] Risk assessment: Score=50, Triggers=['⚠️ Effective distance violation: 159.83km > 50.0km threshold'], Requires OTP=True, Decision=Monitor
[2025-09-04 14:39:56] [INFO] [transactions] ML score: 0.5, Contribution: 20, Final risk score: 70
[2025-09-04 14:39:56] [INFO] [transactions] Transaction details: ID=319, Client=loay abassi, Type=transfer, Amount=500.00 DZD, Risk Score=70, Decision=Monitor, Triggers=['⚠️ Effective distance violation: 159.83km > 50.0km threshold']
[2025-09-04 14:39:56] [INFO] [transactions] Transaction | ID: 319 | Amount: 500.00 DZD | Type: transfer | Status: CREATED | Data: {"transaction_id": 319, "amount": "500.00", "transaction_type": "transfer", "user_id": 71, "status": "CREATED", "risk_level": "Score_70"}
[2025-09-04 14:39:56] [INFO] [transactions] OTP decision for transaction 319: Required=True, Reasons=['Business rules triggered: 1', 'High risk score: 70', 'Risk engine explicit requirement']
[2025-09-04 14:39:56] [INFO] [transactions] Creating transaction OTP for transaction 319, user abassi.loay@gmail.com
[2025-09-04 14:39:56] [INFO] [transactions] Created transaction OTP 950298 for transaction 319, expires at 2025-09-04 13:49:56.029659+00:00
[2025-09-04 14:39:57] [INFO] [transactions] Transaction OTP created and sent successfully for transaction 319
[2025-09-04 14:39:57] [INFO] [transactions] Transaction requires OTP verification: ID 319, Risk score: 70, Triggers: 1, ML score: 0.500
[2025-09-04 14:42:00] [INFO] [transactions] Creating transaction for user abassi.loay@gmail.com
[2025-09-04 14:42:00] [INFO] [transactions] Client profile found: loay abassi
[2025-09-04 14:42:00] [INFO] [transactions] Location validation passed: (35.6286464, 10.8986368)
[2025-09-04 14:42:00] [INFO] [transactions] Updated last known location for user abassi.loay@gmail.com: (35.6286464, 10.8986368)
[2025-09-04 14:42:00] [INFO] [transactions] Location tracking: User=abassi.loay@gmail.com, Home=(34.931003, 9.357500), Current=(35.6286464, 10.8986368), Last Known=(35.6286464, 10.8986368)
[2025-09-04 14:42:00] [INFO] [transactions] Transaction created: ID 320, Amount: 500.00, Type: transfer
[2025-09-04 14:42:00] [INFO] [transactions] Risk assessment: Score=50, Triggers=['⚠️ Effective distance violation: 159.83km > 60.0km threshold'], Requires OTP=True, Decision=Monitor
[2025-09-04 14:42:00] [INFO] [transactions] ML score: 0.5, Contribution: 20, Final risk score: 70
[2025-09-04 14:42:00] [INFO] [transactions] Transaction details: ID=320, Client=loay abassi, Type=transfer, Amount=500.00 DZD, Risk Score=70, Decision=Monitor, Triggers=['⚠️ Effective distance violation: 159.83km > 60.0km threshold']
[2025-09-04 14:42:00] [INFO] [transactions] Transaction | ID: 320 | Amount: 500.00 DZD | Type: transfer | Status: CREATED | Data: {"transaction_id": 320, "amount": "500.00", "transaction_type": "transfer", "user_id": 71, "status": "CREATED", "risk_level": "Score_70"}
[2025-09-04 14:42:00] [INFO] [transactions] OTP decision for transaction 320: Required=True, Reasons=['Business rules triggered: 1', 'High risk score: 70', 'Risk engine explicit requirement']
[2025-09-04 14:42:00] [INFO] [transactions] Creating transaction OTP for transaction 320, user abassi.loay@gmail.com
[2025-09-04 14:42:00] [INFO] [transactions] Created transaction OTP 506187 for transaction 320, expires at 2025-09-04 13:52:00.607004+00:00
[2025-09-04 14:42:02] [INFO] [transactions] Transaction OTP created and sent successfully for transaction 320
[2025-09-04 14:42:02] [INFO] [transactions] Transaction requires OTP verification: ID 320, Risk score: 70, Triggers: 1, ML score: 0.500
[2025-09-04 14:43:03] [INFO] [transactions] Verifying transaction OTP for transaction 320, user abassi.loay@gmail.com
[2025-09-04 14:43:03] [INFO] [transactions] Transaction OTP verified successfully for transaction 320
[2025-09-04 14:43:03] [INFO] [transactions] Updating balances for transaction 320
[2025-09-04 14:43:03] [INFO] [transactions] Current balance: 699990500.00, Amount: 500.00
[2025-09-04 14:43:03] [INFO] [transactions] Transfer (sender): New balance = 699990000.00
[2025-09-04 14:43:03] [WARNING] [transactions] Recipient account 11111111 not found for transfer
[2025-09-04 14:43:03] [INFO] [transactions] Updating statistics for client loay abassi
[2025-09-04 14:43:03] [INFO] [transactions] Statistics updated for loay abassi: avg_amount=9500, std_amount=0, transaction_count=1
[2025-09-04 14:43:03] [INFO] [transactions] Balance update completed for client loay abassi. New balance: 699990000.00 DZD
[2025-09-04 14:43:03] [INFO] [transactions] Transaction 320 completed after OTP verification
[2025-09-04 14:43:20] [INFO] [transactions] Creating transaction for user abassi.loay@gmail.com
[2025-09-04 14:43:20] [INFO] [transactions] Client profile found: loay abassi
[2025-09-04 14:43:20] [INFO] [transactions] Location validation passed: (35.6286464, 10.8986368)
[2025-09-04 14:43:20] [INFO] [transactions] Updated last known location for user abassi.loay@gmail.com: (35.6286464, 10.8986368)
[2025-09-04 14:43:20] [INFO] [transactions] Location tracking: User=abassi.loay@gmail.com, Home=(34.931003, 9.357500), Current=(35.6286464, 10.8986368), Last Known=(35.6286464, 10.8986368)
[2025-09-04 14:43:20] [INFO] [transactions] Transaction created: ID 321, Amount: 499.98, Type: transfer
[2025-09-04 14:43:20] [INFO] [transactions] Risk assessment: Score=50, Triggers=['⚠️ Effective distance violation: 159.83km > 60.0km threshold'], Requires OTP=True, Decision=Monitor
[2025-09-04 14:43:20] [INFO] [transactions] ML score: 0.5, Contribution: 20, Final risk score: 70
[2025-09-04 14:43:20] [INFO] [transactions] Transaction details: ID=321, Client=loay abassi, Type=transfer, Amount=499.98 DZD, Risk Score=70, Decision=Monitor, Triggers=['⚠️ Effective distance violation: 159.83km > 60.0km threshold']
[2025-09-04 14:43:20] [INFO] [transactions] Transaction | ID: 321 | Amount: 499.98 DZD | Type: transfer | Status: CREATED | Data: {"transaction_id": 321, "amount": "499.98", "transaction_type": "transfer", "user_id": 71, "status": "CREATED", "risk_level": "Score_70"}
[2025-09-04 14:43:20] [INFO] [transactions] OTP decision for transaction 321: Required=True, Reasons=['Business rules triggered: 1', 'High risk score: 70', 'Risk engine explicit requirement']
[2025-09-04 14:43:20] [INFO] [transactions] Creating transaction OTP for transaction 321, user abassi.loay@gmail.com
[2025-09-04 14:43:20] [INFO] [transactions] Created transaction OTP 151127 for transaction 321, expires at 2025-09-04 13:53:20.691497+00:00
[2025-09-04 14:43:22] [INFO] [transactions] Transaction OTP created and sent successfully for transaction 321
[2025-09-04 14:43:22] [INFO] [transactions] Transaction requires OTP verification: ID 321, Risk score: 70, Triggers: 1, ML score: 0.500
